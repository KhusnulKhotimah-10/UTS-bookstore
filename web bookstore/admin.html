<!doctype html>
<html lang="id">
<head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Admin - Toko Buku</title><link rel="stylesheet" href="style.css"></head>
<body>
<div style="display:flex;min-height:100vh">
  <aside style="width:260px;background:linear-gradient(180deg,var(--primary),var(--primary-600));color:white;padding:22px">
    <div style="display:flex;align-items:center;gap:12px;margin-bottom:18px"><div class="logo" style="width:44px;height:44px">TB</div><div style="font-weight:700">Admin Panel</div></div>
    <nav style="display:flex;flex-direction:column;gap:8px">
      <a href="#" style="color:white;text-decoration:none;padding:10px;border-radius:8px">Dashboard</a>
      <a href="stok.html" style="color:white;text-decoration:none;padding:10px;border-radius:8px">Kelola Katalog</a>
      <a href="#" style="color:white;text-decoration:none;padding:10px;border-radius:8px">Order & Laporan</a>
      <a href="#" style="color:white;text-decoration:none;padding:10px;border-radius:8px">Pengaturan</a>
    </nav>
    <div style="margin-top:auto"><button class="btn" onclick="location.href='index.html'">Keluar</button></div>
  </aside>

  <main style="flex:1;padding:28px">
    <h2>Selamat Datang, Admin</h2>
    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-top:18px">
      <div class="card small-card"><div><div style="font-size:18px;font-weight:700" id="statBooks">-</div><div style="color:var(--muted)">Total Buku</div></div></div>
      <div class="card small-card"><div><div style="font-size:18px;font-weight:700" id="statOrders">-</div><div style="color:var(--muted)">Total Pesanan</div></div></div>
      <div class="card small-card"><div><div style="font-size:18px;font-weight:700" id="statUsers">-</div><div style="color:var(--muted)">Total Pengguna</div></div></div>
      <div class="card small-card"><div><div style="font-size:18px;font-weight:700" id="statMessages">12</div><div style="color:var(--muted)">Pesan Baru</div></div></div>
    </div>

    <section style="margin-top:20px" class="card">
      <h3>Pesanan Terbaru</h3>
      <table class="table" id="ordersTable"><thead><tr><th>NO DO</th><th>Nama</th><th>Total</th><th>Status</th></tr></thead><tbody></tbody></table>
    </section>
  </main>
</div>

<script src="data.js"></script>
<script src="script.js"></script>
<script>
document.addEventListener('DOMContentLoaded', ()=>{
  const user = JSON.parse(localStorage.getItem('userLogged'));
  if(!user || user.role!=='admin'){ alert('Akses admin saja'); location.href='index.html'; return; }
  document.getElementById('statBooks').innerText = dataKatalogBuku.length;
  document.getElementById('statUsers').innerText = users.length;
  const orders = getOrders();
  document.getElementById('statOrders').innerText = orders.length;
  const tbody = document.querySelector('#ordersTable tbody');
  tbody.innerHTML = orders.map(o=>`<tr><td>${o.noDO}</td><td>${o.pembeli.nama}</td><td>${currency(o.total)}</td><td>${o.status}</td></tr>`).join('');
});
</script>
</body>
</html>
